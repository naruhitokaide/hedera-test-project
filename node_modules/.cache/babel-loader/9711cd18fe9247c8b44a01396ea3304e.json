{"ast":null,"code":"import TokenId from \"../token/TokenId.js\";\nimport AccountId from \"../account/AccountId.js\";\nimport ObjectMap from \"../ObjectMap.js\";\n/**\n * @namespace proto\n * @typedef {import(\"@hashgraph/proto\").ITokenTransferList} proto.ITokenTransferList\n * @typedef {import(\"@hashgraph/proto\").INftTransfer} proto.INftTransfer\n * @typedef {import(\"@hashgraph/proto\").IAccountAmount} proto.IAccountAmount\n * @typedef {import(\"@hashgraph/proto\").ITokenID} proto.ITokenID\n * @typedef {import(\"@hashgraph/proto\").IAccountID} proto.IAccountID\n */\n\n/**\n * @typedef {object} NftTransfer\n * @property {AccountId} sender\n * @property {AccountId} recipient\n * @property {Long} serial\n */\n\n/**\n * @augments {ObjectMap<TokenId, NftTransfer[]>}\n */\n\nexport default class TokenNftTransferMap extends ObjectMap {\n  constructor() {\n    super(s => TokenId.fromString(s));\n  }\n  /**\n   * @internal\n   * @param {TokenId} tokenId\n   * @param {NftTransfer} nftTransfer\n   */\n\n\n  __set(tokenId, nftTransfer) {\n    const token = tokenId.toString();\n\n    let _map = this._map.get(token);\n\n    if (_map == null) {\n      _map = [];\n\n      this._map.set(token, _map);\n\n      this.__map.set(tokenId, _map);\n    }\n\n    _map.push(nftTransfer);\n  }\n  /**\n   * @param {proto.ITokenTransferList[]} transfers\n   * @returns {TokenNftTransferMap}\n   */\n\n\n  static _fromProtobuf(transfers) {\n    const tokenTransfersMap = new TokenNftTransferMap();\n\n    for (const transfer of transfers) {\n      const token = TokenId._fromProtobuf(\n      /** @type {proto.ITokenID} */\n      transfer.token);\n\n      for (const aa of transfer.nftTransfers != null ? transfer.nftTransfers : []) {\n        const sender = AccountId._fromProtobuf(\n        /** @type {proto.IAccountID} */\n        aa.senderAccountID);\n\n        const recipient = AccountId._fromProtobuf(\n        /** @type {proto.IAccountID} */\n        aa.receiverAccountID);\n\n        tokenTransfersMap.__set(token, {\n          sender,\n          recipient,\n          serial:\n          /** @type {Long} */\n          aa.serialNumber\n        });\n      }\n    }\n\n    return tokenTransfersMap;\n  }\n  /**\n   * @returns {proto.ITokenTransferList[]}\n   */\n\n\n  _toProtobuf() {\n    /** @type {proto.ITokenTransferList[]} */\n    const tokenTransferList = [];\n\n    for (const [tokenId, value] of this) {\n      /** @type {proto.INftTransfer[]} */\n      const transfers = [];\n\n      for (const transfer of value) {\n        transfers.push({\n          senderAccountID: transfer.sender._toProtobuf(),\n          receiverAccountID: transfer.recipient._toProtobuf(),\n          serialNumber: transfer.serial\n        });\n      }\n\n      tokenTransferList.push({\n        token: tokenId._toProtobuf(),\n        nftTransfers: transfers\n      });\n    }\n\n    return tokenTransferList;\n  }\n\n}","map":{"version":3,"sources":["C:/Work/coding-sandbox/react-again/dapp-days/node_modules/@hashgraph/sdk/src/account/TokenNftTransferMap.js"],"names":["TokenId","AccountId","ObjectMap","TokenNftTransferMap","constructor","s","fromString","__set","tokenId","nftTransfer","token","toString","_map","get","set","__map","push","_fromProtobuf","transfers","tokenTransfersMap","transfer","aa","nftTransfers","sender","senderAccountID","recipient","receiverAccountID","serial","serialNumber","_toProtobuf","tokenTransferList","value"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,qBAApB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AACA,eAAe,MAAMC,mBAAN,SAAkCD,SAAlC,CAA4C;AACvDE,EAAAA,WAAW,GAAG;AACV,UAAOC,CAAD,IAAOL,OAAO,CAACM,UAAR,CAAmBD,CAAnB,CAAb;AACH;AAED;AACJ;AACA;AACA;AACA;;;AACIE,EAAAA,KAAK,CAACC,OAAD,EAAUC,WAAV,EAAuB;AACxB,UAAMC,KAAK,GAAGF,OAAO,CAACG,QAAR,EAAd;;AAEA,QAAIC,IAAI,GAAG,KAAKA,IAAL,CAAUC,GAAV,CAAcH,KAAd,CAAX;;AACA,QAAIE,IAAI,IAAI,IAAZ,EAAkB;AACdA,MAAAA,IAAI,GAAG,EAAP;;AACA,WAAKA,IAAL,CAAUE,GAAV,CAAcJ,KAAd,EAAqBE,IAArB;;AACA,WAAKG,KAAL,CAAWD,GAAX,CAAeN,OAAf,EAAwBI,IAAxB;AACH;;AAEDA,IAAAA,IAAI,CAACI,IAAL,CAAUP,WAAV;AACH;AAED;AACJ;AACA;AACA;;;AACwB,SAAbQ,aAAa,CAACC,SAAD,EAAY;AAC5B,UAAMC,iBAAiB,GAAG,IAAIhB,mBAAJ,EAA1B;;AAEA,SAAK,MAAMiB,QAAX,IAAuBF,SAAvB,EAAkC;AAC9B,YAAMR,KAAK,GAAGV,OAAO,CAACiB,aAAR;AACV;AAA+BG,MAAAA,QAAQ,CAACV,KAD9B,CAAd;;AAIA,WAAK,MAAMW,EAAX,IAAiBD,QAAQ,CAACE,YAAT,IAAyB,IAAzB,GACXF,QAAQ,CAACE,YADE,GAEX,EAFN,EAEU;AACN,cAAMC,MAAM,GAAGtB,SAAS,CAACgB,aAAV;AACX;AAAiCI,QAAAA,EAAE,CAACG,eADzB,CAAf;;AAGA,cAAMC,SAAS,GAAGxB,SAAS,CAACgB,aAAV;AACd;AAAiCI,QAAAA,EAAE,CAACK,iBADtB,CAAlB;;AAIAP,QAAAA,iBAAiB,CAACZ,KAAlB,CAAwBG,KAAxB,EAA+B;AAC3Ba,UAAAA,MAD2B;AAE3BE,UAAAA,SAF2B;AAG3BE,UAAAA,MAAM;AAAE;AAAqBN,UAAAA,EAAE,CAACO;AAHL,SAA/B;AAKH;AACJ;;AAED,WAAOT,iBAAP;AACH;AAED;AACJ;AACA;;;AACIU,EAAAA,WAAW,GAAG;AACV;AACA,UAAMC,iBAAiB,GAAG,EAA1B;;AAEA,SAAK,MAAM,CAACtB,OAAD,EAAUuB,KAAV,CAAX,IAA+B,IAA/B,EAAqC;AACjC;AACA,YAAMb,SAAS,GAAG,EAAlB;;AAEA,WAAK,MAAME,QAAX,IAAuBW,KAAvB,EAA8B;AAC1Bb,QAAAA,SAAS,CAACF,IAAV,CAAe;AACXQ,UAAAA,eAAe,EAAEJ,QAAQ,CAACG,MAAT,CAAgBM,WAAhB,EADN;AAEXH,UAAAA,iBAAiB,EAAEN,QAAQ,CAACK,SAAT,CAAmBI,WAAnB,EAFR;AAGXD,UAAAA,YAAY,EAAER,QAAQ,CAACO;AAHZ,SAAf;AAKH;;AAEDG,MAAAA,iBAAiB,CAACd,IAAlB,CAAuB;AACnBN,QAAAA,KAAK,EAAEF,OAAO,CAACqB,WAAR,EADY;AAEnBP,QAAAA,YAAY,EAAEJ;AAFK,OAAvB;AAIH;;AAED,WAAOY,iBAAP;AACH;;AAlFsD","sourcesContent":["import TokenId from \"../token/TokenId.js\";\nimport AccountId from \"../account/AccountId.js\";\nimport ObjectMap from \"../ObjectMap.js\";\n\n/**\n * @namespace proto\n * @typedef {import(\"@hashgraph/proto\").ITokenTransferList} proto.ITokenTransferList\n * @typedef {import(\"@hashgraph/proto\").INftTransfer} proto.INftTransfer\n * @typedef {import(\"@hashgraph/proto\").IAccountAmount} proto.IAccountAmount\n * @typedef {import(\"@hashgraph/proto\").ITokenID} proto.ITokenID\n * @typedef {import(\"@hashgraph/proto\").IAccountID} proto.IAccountID\n */\n\n/**\n * @typedef {object} NftTransfer\n * @property {AccountId} sender\n * @property {AccountId} recipient\n * @property {Long} serial\n */\n\n/**\n * @augments {ObjectMap<TokenId, NftTransfer[]>}\n */\nexport default class TokenNftTransferMap extends ObjectMap {\n    constructor() {\n        super((s) => TokenId.fromString(s));\n    }\n\n    /**\n     * @internal\n     * @param {TokenId} tokenId\n     * @param {NftTransfer} nftTransfer\n     */\n    __set(tokenId, nftTransfer) {\n        const token = tokenId.toString();\n\n        let _map = this._map.get(token);\n        if (_map == null) {\n            _map = [];\n            this._map.set(token, _map);\n            this.__map.set(tokenId, _map);\n        }\n\n        _map.push(nftTransfer);\n    }\n\n    /**\n     * @param {proto.ITokenTransferList[]} transfers\n     * @returns {TokenNftTransferMap}\n     */\n    static _fromProtobuf(transfers) {\n        const tokenTransfersMap = new TokenNftTransferMap();\n\n        for (const transfer of transfers) {\n            const token = TokenId._fromProtobuf(\n                /** @type {proto.ITokenID} */ (transfer.token)\n            );\n\n            for (const aa of transfer.nftTransfers != null\n                ? transfer.nftTransfers\n                : []) {\n                const sender = AccountId._fromProtobuf(\n                    /** @type {proto.IAccountID} */ (aa.senderAccountID)\n                );\n                const recipient = AccountId._fromProtobuf(\n                    /** @type {proto.IAccountID} */ (aa.receiverAccountID)\n                );\n\n                tokenTransfersMap.__set(token, {\n                    sender,\n                    recipient,\n                    serial: /** @type {Long} */ (aa.serialNumber),\n                });\n            }\n        }\n\n        return tokenTransfersMap;\n    }\n\n    /**\n     * @returns {proto.ITokenTransferList[]}\n     */\n    _toProtobuf() {\n        /** @type {proto.ITokenTransferList[]} */\n        const tokenTransferList = [];\n\n        for (const [tokenId, value] of this) {\n            /** @type {proto.INftTransfer[]} */\n            const transfers = [];\n\n            for (const transfer of value) {\n                transfers.push({\n                    senderAccountID: transfer.sender._toProtobuf(),\n                    receiverAccountID: transfer.recipient._toProtobuf(),\n                    serialNumber: transfer.serial,\n                });\n            }\n\n            tokenTransferList.push({\n                token: tokenId._toProtobuf(),\n                nftTransfers: transfers,\n            });\n        }\n\n        return tokenTransferList;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}