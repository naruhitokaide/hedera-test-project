{"ast":null,"code":"import Query, { QUERY_REGISTRY } from \"../query/Query.js\";\nimport TransactionRecord from \"./TransactionRecord.js\";\nimport TransactionReceipt from \"./TransactionReceipt.js\";\nimport TransactionId from \"./TransactionId.js\";\nimport Status from \"../Status.js\";\nimport PrecheckStatusError from \"../PrecheckStatusError.js\";\nimport ReceiptStatusError from \"../ReceiptStatusError.js\";\nimport { ExecutionState } from \"../Executable.js\";\nimport { ResponseType, ResponseCodeEnum } from \"@hashgraph/proto\";\n/**\n * @namespace proto\n * @typedef {import(\"@hashgraph/proto\").IQuery} proto.IQuery\n * @typedef {import(\"@hashgraph/proto\").IQueryHeader} proto.IQueryHeader\n * @typedef {import(\"@hashgraph/proto\").ITransactionRecord} proto.ITransactionRecord\n * @typedef {import(\"@hashgraph/proto\").ITransactionReceipt} proto.ITransactionReceipt\n * @typedef {import(\"@hashgraph/proto\").ITransactionGetRecordResponse} proto.ITransactionGetRecordResponse\n * @typedef {import(\"@hashgraph/proto\").ITransactionGetRecordQuery} proto.ITransactionGetRecordQuery\n * @typedef {import(\"@hashgraph/proto\").IResponse} proto.IResponse\n * @typedef {import(\"@hashgraph/proto\").IResponseHeader} proto.IResponseHeader\n * @typedef {import(\"@hashgraph/proto\").ResponseCodeEnum} proto.ResponseCodeEnum\n */\n\n/**\n * @typedef {import(\"../channel/Channel.js\").default} Channel\n * @typedef {import(\"../client/Client.js\").default<*, *>} Client\n * @typedef {import(\"../account/AccountId.js\").default} AccountId\n */\n\n/**\n * @augments {Query<TransactionRecord>}\n */\n\nexport default class TransactionRecordQuery extends Query {\n  /**\n   * @param {object} [props]\n   * @param {TransactionId} [props.transactionId]\n   * @param {boolean} [props.includeChildren]\n   * @param {boolean} [props.includeDuplicates]\n   */\n  constructor() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n    /**\n     * @private\n     * @type {?TransactionId}\n     */\n\n    this._transactionId = null;\n    /**\n     * @private\n     * @type {?boolean}\n     */\n\n    this._includeChildren = null;\n    /**\n     * @private\n     * @type {?boolean}\n     */\n\n    this._includeDuplicates = null;\n\n    if (props.transactionId != null) {\n      this.setTransactionId(props.transactionId);\n    }\n\n    if (props.includeChildren != null) {\n      this.setIncludeChildren(props.includeChildren);\n    }\n\n    if (props.includeDuplicates != null) {\n      this.setIncludeDuplicates(props.includeDuplicates);\n    }\n  }\n  /**\n   * @returns {?TransactionId}\n   */\n\n\n  get transactionId() {\n    return this._transactionId;\n  }\n  /**\n   * @internal\n   * @param {proto.IQuery} query\n   * @returns {TransactionRecordQuery}\n   */\n\n\n  static _fromProtobuf(query) {\n    const record =\n    /** @type {proto.ITransactionGetRecordQuery} */\n    query.transactionGetRecord;\n    return new TransactionRecordQuery({\n      transactionId: record.transactionID ? TransactionId._fromProtobuf(record.transactionID) : undefined,\n      includeChildren: record.includeChildRecords != null ? record.includeChildRecords : undefined,\n      includeDuplicates: record.includeDuplicates != null ? record.includeDuplicates : undefined\n    });\n  }\n  /**\n   * Set the transaction ID for which the record is being requested.\n   *\n   * @param {TransactionId | string} transactionId\n   * @returns {TransactionRecordQuery}\n   */\n\n\n  setTransactionId(transactionId) {\n    this._transactionId = typeof transactionId === \"string\" ? TransactionId.fromString(transactionId) : transactionId.clone();\n    return this;\n  }\n  /**\n   * @param {boolean} includeChildren\n   * @returns {TransactionRecordQuery}\n   */\n\n\n  setIncludeChildren(includeChildren) {\n    this._includeChildren = includeChildren;\n    return this;\n  }\n  /**\n   * @returns {boolean}\n   */\n\n\n  get includeChildren() {\n    return this._includeChildren != null ? this._includeChildren : false;\n  }\n  /**\n   * @param {boolean} includeDuplicates\n   * @returns {TransactionRecordQuery}\n   */\n\n\n  setIncludeDuplicates(includeDuplicates) {\n    this._duplicates = includeDuplicates;\n    return this;\n  }\n  /**\n   * @returns {boolean}\n   */\n\n\n  get includeDuplicates() {\n    return this._duplicates != null ? this._duplicates : false;\n  }\n  /**\n   * @override\n   * @internal\n   * @param {proto.IQuery} request\n   * @param {proto.IResponse} response\n   * @returns {ExecutionState}\n   */\n\n\n  _shouldRetry(request, response) {\n    const {\n      nodeTransactionPrecheckCode\n    } = this._mapResponseHeader(response);\n\n    let status = Status._fromCode(nodeTransactionPrecheckCode != null ? nodeTransactionPrecheckCode : ResponseCodeEnum.OK);\n\n    switch (status) {\n      case Status.Busy:\n      case Status.Unknown:\n      case Status.ReceiptNotFound:\n      case Status.RecordNotFound:\n        return ExecutionState.Retry;\n\n      case Status.Ok:\n        break;\n\n      default:\n        return ExecutionState.Error;\n    }\n\n    const transactionGetRecord =\n    /** @type {proto.ITransactionGetRecordResponse} */\n    response.transactionGetRecord;\n    const header =\n    /** @type {proto.IResponseHeader} */\n    transactionGetRecord.header;\n\n    if (header.responseType === ResponseType.COST_ANSWER) {\n      return ExecutionState.Finished;\n    }\n\n    const record =\n    /** @type {proto.ITransactionRecord} */\n    transactionGetRecord.transactionRecord;\n    const receipt =\n    /** @type {proto.ITransactionReceipt} */\n    record.receipt;\n    const receiptStatusCode =\n    /** @type {proto.ResponseCodeEnum} */\n    receipt.status;\n    status = Status._fromCode(receiptStatusCode);\n\n    switch (status) {\n      case Status.Ok:\n      case Status.Busy:\n      case Status.Unknown:\n      case Status.ReceiptNotFound:\n      case Status.RecordNotFound:\n        return ExecutionState.Retry;\n\n      case Status.Success:\n        return ExecutionState.Finished;\n\n      default:\n        return ExecutionState.Error;\n    }\n  }\n  /**\n   * @override\n   * @internal\n   * @param {proto.IQuery} request\n   * @param {proto.IResponse} response\n   * @returns {Error}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  _mapStatusError(request, response) {\n    const {\n      nodeTransactionPrecheckCode\n    } = this._mapResponseHeader(response);\n\n    let status = Status._fromCode(nodeTransactionPrecheckCode != null ? nodeTransactionPrecheckCode : ResponseCodeEnum.OK);\n\n    switch (status) {\n      case Status.Ok:\n        // Do nothing\n        break;\n\n      default:\n        return new PrecheckStatusError({\n          status,\n          transactionId: this._getTransactionId()\n        });\n    }\n\n    const transactionGetRecord =\n    /** @type {proto.ITransactionGetRecordResponse} */\n    response.transactionGetRecord;\n    const record =\n    /** @type {proto.ITransactionRecord} */\n    transactionGetRecord.transactionRecord;\n    const receipt =\n    /** @type {proto.ITransactionReceipt} */\n    record.receipt;\n    const receiptStatusError =\n    /** @type {proto.ResponseCodeEnum} */\n    receipt.status;\n    status = Status._fromCode(receiptStatusError);\n    return new ReceiptStatusError({\n      status,\n      transactionId: this._getTransactionId(),\n      transactionReceipt: TransactionReceipt._fromProtobuf({\n        receipt\n      })\n    });\n  }\n  /**\n   * @param {Client} client\n   */\n\n\n  _validateChecksums(client) {\n    if (this._transactionId != null && this._transactionId.accountId != null) {\n      this._transactionId.accountId.validateChecksum(client);\n    }\n  }\n  /**\n   * @override\n   * @internal\n   * @param {Channel} channel\n   * @param {proto.IQuery} request\n   * @returns {Promise<proto.IResponse>}\n   */\n\n\n  _execute(channel, request) {\n    return channel.crypto.getTxRecordByTxID(request);\n  }\n  /**\n   * @override\n   * @override\n   * @internal\n   * @param {proto.IResponse} response\n   * @returns {proto.IResponseHeader}\n   */\n\n\n  _mapResponseHeader(response) {\n    const transactionGetRecord =\n    /** @type {proto.ITransactionGetRecordResponse} */\n    response.transactionGetRecord;\n    return (\n      /** @type {proto.IResponseHeader} */\n      transactionGetRecord.header\n    );\n  }\n  /**\n   * @override\n   * @internal\n   * @param {proto.IResponse} response\n   * @param {AccountId} nodeAccountId\n   * @param {proto.IQuery} request\n   * @returns {Promise<TransactionRecord>}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  _mapResponse(response, nodeAccountId, request) {\n    const record =\n    /** @type {proto.ITransactionGetRecordResponse} */\n    response.transactionGetRecord;\n    return Promise.resolve(TransactionRecord._fromProtobuf(record));\n  }\n  /**\n   * @override\n   * @internal\n   * @param {proto.IQueryHeader} header\n   * @returns {proto.IQuery}\n   */\n\n\n  _onMakeRequest(header) {\n    return {\n      transactionGetRecord: {\n        header,\n        transactionID: this._transactionId != null ? this._transactionId._toProtobuf() : null,\n        includeChildRecords: this._includeChildren,\n        includeDuplicates: this._includeDuplicates\n      }\n    };\n  }\n\n}\nQUERY_REGISTRY.set(\"transactionGetRecord\", // eslint-disable-next-line @typescript-eslint/unbound-method\nTransactionRecordQuery._fromProtobuf);","map":{"version":3,"sources":["C:/Work/coding-sandbox/react-again/dapp-days/node_modules/@hashgraph/sdk/src/transaction/TransactionRecordQuery.js"],"names":["Query","QUERY_REGISTRY","TransactionRecord","TransactionReceipt","TransactionId","Status","PrecheckStatusError","ReceiptStatusError","ExecutionState","ResponseType","ResponseCodeEnum","TransactionRecordQuery","constructor","props","_transactionId","_includeChildren","_includeDuplicates","transactionId","setTransactionId","includeChildren","setIncludeChildren","includeDuplicates","setIncludeDuplicates","_fromProtobuf","query","record","transactionGetRecord","transactionID","undefined","includeChildRecords","fromString","clone","_duplicates","_shouldRetry","request","response","nodeTransactionPrecheckCode","_mapResponseHeader","status","_fromCode","OK","Busy","Unknown","ReceiptNotFound","RecordNotFound","Retry","Ok","Error","header","responseType","COST_ANSWER","Finished","transactionRecord","receipt","receiptStatusCode","Success","_mapStatusError","_getTransactionId","receiptStatusError","transactionReceipt","_validateChecksums","client","accountId","validateChecksum","_execute","channel","crypto","getTxRecordByTxID","_mapResponse","nodeAccountId","Promise","resolve","_onMakeRequest","_toProtobuf","set"],"mappings":"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","sourcesContent":["import Query, { QUERY_REGISTRY } from \"../query/Query.js\";\nimport TransactionRecord from \"./TransactionRecord.js\";\nimport TransactionReceipt from \"./TransactionReceipt.js\";\nimport TransactionId from \"./TransactionId.js\";\nimport Status from \"../Status.js\";\nimport PrecheckStatusError from \"../PrecheckStatusError.js\";\nimport ReceiptStatusError from \"../ReceiptStatusError.js\";\nimport { ExecutionState } from \"../Executable.js\";\nimport { ResponseType, ResponseCodeEnum } from \"@hashgraph/proto\";\n\n/**\n * @namespace proto\n * @typedef {import(\"@hashgraph/proto\").IQuery} proto.IQuery\n * @typedef {import(\"@hashgraph/proto\").IQueryHeader} proto.IQueryHeader\n * @typedef {import(\"@hashgraph/proto\").ITransactionRecord} proto.ITransactionRecord\n * @typedef {import(\"@hashgraph/proto\").ITransactionReceipt} proto.ITransactionReceipt\n * @typedef {import(\"@hashgraph/proto\").ITransactionGetRecordResponse} proto.ITransactionGetRecordResponse\n * @typedef {import(\"@hashgraph/proto\").ITransactionGetRecordQuery} proto.ITransactionGetRecordQuery\n * @typedef {import(\"@hashgraph/proto\").IResponse} proto.IResponse\n * @typedef {import(\"@hashgraph/proto\").IResponseHeader} proto.IResponseHeader\n * @typedef {import(\"@hashgraph/proto\").ResponseCodeEnum} proto.ResponseCodeEnum\n */\n\n/**\n * @typedef {import(\"../channel/Channel.js\").default} Channel\n * @typedef {import(\"../client/Client.js\").default<*, *>} Client\n * @typedef {import(\"../account/AccountId.js\").default} AccountId\n */\n\n/**\n * @augments {Query<TransactionRecord>}\n */\nexport default class TransactionRecordQuery extends Query {\n    /**\n     * @param {object} [props]\n     * @param {TransactionId} [props.transactionId]\n     * @param {boolean} [props.includeChildren]\n     * @param {boolean} [props.includeDuplicates]\n     */\n    constructor(props = {}) {\n        super();\n\n        /**\n         * @private\n         * @type {?TransactionId}\n         */\n        this._transactionId = null;\n\n        /**\n         * @private\n         * @type {?boolean}\n         */\n        this._includeChildren = null;\n\n        /**\n         * @private\n         * @type {?boolean}\n         */\n        this._includeDuplicates = null;\n\n        if (props.transactionId != null) {\n            this.setTransactionId(props.transactionId);\n        }\n\n        if (props.includeChildren != null) {\n            this.setIncludeChildren(props.includeChildren);\n        }\n\n        if (props.includeDuplicates != null) {\n            this.setIncludeDuplicates(props.includeDuplicates);\n        }\n    }\n\n    /**\n     * @returns {?TransactionId}\n     */\n    get transactionId() {\n        return this._transactionId;\n    }\n\n    /**\n     * @internal\n     * @param {proto.IQuery} query\n     * @returns {TransactionRecordQuery}\n     */\n    static _fromProtobuf(query) {\n        const record = /** @type {proto.ITransactionGetRecordQuery} */ (\n            query.transactionGetRecord\n        );\n\n        return new TransactionRecordQuery({\n            transactionId: record.transactionID\n                ? TransactionId._fromProtobuf(record.transactionID)\n                : undefined,\n            includeChildren:\n                record.includeChildRecords != null\n                    ? record.includeChildRecords\n                    : undefined,\n            includeDuplicates:\n                record.includeDuplicates != null\n                    ? record.includeDuplicates\n                    : undefined,\n        });\n    }\n\n    /**\n     * Set the transaction ID for which the record is being requested.\n     *\n     * @param {TransactionId | string} transactionId\n     * @returns {TransactionRecordQuery}\n     */\n    setTransactionId(transactionId) {\n        this._transactionId =\n            typeof transactionId === \"string\"\n                ? TransactionId.fromString(transactionId)\n                : transactionId.clone();\n\n        return this;\n    }\n\n    /**\n     * @param {boolean} includeChildren\n     * @returns {TransactionRecordQuery}\n     */\n    setIncludeChildren(includeChildren) {\n        this._includeChildren = includeChildren;\n        return this;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n    get includeChildren() {\n        return this._includeChildren != null ? this._includeChildren : false;\n    }\n\n    /**\n     * @param {boolean} includeDuplicates\n     * @returns {TransactionRecordQuery}\n     */\n    setIncludeDuplicates(includeDuplicates) {\n        this._duplicates = includeDuplicates;\n        return this;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n    get includeDuplicates() {\n        return this._duplicates != null ? this._duplicates : false;\n    }\n\n    /**\n     * @override\n     * @internal\n     * @param {proto.IQuery} request\n     * @param {proto.IResponse} response\n     * @returns {ExecutionState}\n     */\n    _shouldRetry(request, response) {\n        const { nodeTransactionPrecheckCode } =\n            this._mapResponseHeader(response);\n\n        let status = Status._fromCode(\n            nodeTransactionPrecheckCode != null\n                ? nodeTransactionPrecheckCode\n                : ResponseCodeEnum.OK\n        );\n\n        switch (status) {\n            case Status.Busy:\n            case Status.Unknown:\n            case Status.ReceiptNotFound:\n            case Status.RecordNotFound:\n                return ExecutionState.Retry;\n\n            case Status.Ok:\n                break;\n\n            default:\n                return ExecutionState.Error;\n        }\n\n        const transactionGetRecord =\n            /** @type {proto.ITransactionGetRecordResponse} */ (\n                response.transactionGetRecord\n            );\n        const header = /** @type {proto.IResponseHeader} */ (\n            transactionGetRecord.header\n        );\n\n        if (header.responseType === ResponseType.COST_ANSWER) {\n            return ExecutionState.Finished;\n        }\n\n        const record = /** @type {proto.ITransactionRecord} */ (\n            transactionGetRecord.transactionRecord\n        );\n        const receipt = /** @type {proto.ITransactionReceipt} */ (\n            record.receipt\n        );\n        const receiptStatusCode = /** @type {proto.ResponseCodeEnum} */ (\n            receipt.status\n        );\n        status = Status._fromCode(receiptStatusCode);\n\n        switch (status) {\n            case Status.Ok:\n            case Status.Busy:\n            case Status.Unknown:\n            case Status.ReceiptNotFound:\n            case Status.RecordNotFound:\n                return ExecutionState.Retry;\n\n            case Status.Success:\n                return ExecutionState.Finished;\n\n            default:\n                return ExecutionState.Error;\n        }\n    }\n\n    /**\n     * @override\n     * @internal\n     * @param {proto.IQuery} request\n     * @param {proto.IResponse} response\n     * @returns {Error}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _mapStatusError(request, response) {\n        const { nodeTransactionPrecheckCode } =\n            this._mapResponseHeader(response);\n\n        let status = Status._fromCode(\n            nodeTransactionPrecheckCode != null\n                ? nodeTransactionPrecheckCode\n                : ResponseCodeEnum.OK\n        );\n\n        switch (status) {\n            case Status.Ok:\n                // Do nothing\n                break;\n\n            default:\n                return new PrecheckStatusError({\n                    status,\n                    transactionId: this._getTransactionId(),\n                });\n        }\n\n        const transactionGetRecord =\n            /** @type {proto.ITransactionGetRecordResponse} */ (\n                response.transactionGetRecord\n            );\n        const record = /** @type {proto.ITransactionRecord} */ (\n            transactionGetRecord.transactionRecord\n        );\n        const receipt = /** @type {proto.ITransactionReceipt} */ (\n            record.receipt\n        );\n        const receiptStatusError = /** @type {proto.ResponseCodeEnum} */ (\n            receipt.status\n        );\n\n        status = Status._fromCode(receiptStatusError);\n\n        return new ReceiptStatusError({\n            status,\n            transactionId: this._getTransactionId(),\n            transactionReceipt: TransactionReceipt._fromProtobuf({ receipt }),\n        });\n    }\n\n    /**\n     * @param {Client} client\n     */\n    _validateChecksums(client) {\n        if (\n            this._transactionId != null &&\n            this._transactionId.accountId != null\n        ) {\n            this._transactionId.accountId.validateChecksum(client);\n        }\n    }\n\n    /**\n     * @override\n     * @internal\n     * @param {Channel} channel\n     * @param {proto.IQuery} request\n     * @returns {Promise<proto.IResponse>}\n     */\n    _execute(channel, request) {\n        return channel.crypto.getTxRecordByTxID(request);\n    }\n\n    /**\n     * @override\n     * @override\n     * @internal\n     * @param {proto.IResponse} response\n     * @returns {proto.IResponseHeader}\n     */\n    _mapResponseHeader(response) {\n        const transactionGetRecord =\n            /** @type {proto.ITransactionGetRecordResponse} */ (\n                response.transactionGetRecord\n            );\n        return /** @type {proto.IResponseHeader} */ (\n            transactionGetRecord.header\n        );\n    }\n\n    /**\n     * @override\n     * @internal\n     * @param {proto.IResponse} response\n     * @param {AccountId} nodeAccountId\n     * @param {proto.IQuery} request\n     * @returns {Promise<TransactionRecord>}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _mapResponse(response, nodeAccountId, request) {\n        const record = /** @type {proto.ITransactionGetRecordResponse} */ (\n            response.transactionGetRecord\n        );\n\n        return Promise.resolve(TransactionRecord._fromProtobuf(record));\n    }\n\n    /**\n     * @override\n     * @internal\n     * @param {proto.IQueryHeader} header\n     * @returns {proto.IQuery}\n     */\n    _onMakeRequest(header) {\n        return {\n            transactionGetRecord: {\n                header,\n                transactionID:\n                    this._transactionId != null\n                        ? this._transactionId._toProtobuf()\n                        : null,\n                includeChildRecords: this._includeChildren,\n                includeDuplicates: this._includeDuplicates,\n            },\n        };\n    }\n}\n\nQUERY_REGISTRY.set(\n    \"transactionGetRecord\",\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    TransactionRecordQuery._fromProtobuf\n);\n"]},"metadata":{},"sourceType":"module"}